# OCI Authentication
tenancy_ocid     = "ocid1.tenancy.oc1..aaaaaaaas......."
user_ocid        = "ocid1.user.oc1..aaaaaaaam3sa........"
fingerprint      = "07:32:eb:4f:5d:22:b0:3f:d7:22:c1:22:f9:1a:8c:11"
private_key_path = ""
region           = "ap-sydney-1"

# Compartment and Network
compartment_id = "ocid1.tenancy.oc1..aaaaaaaas....."
vcn_id         = "ocid1.vcn.oc1.ap-sydney-1.amaaaaaacvrxdpqauutji........"
subnet_id      = "ocid1.subnet.oc1.ap-sydney-1.aaaaaa...."


vision_one_api_key_secret_ocid = "ocid1.vaultsecret.oc1.ap-sydney-1.aaaaaaa......"
vision_one_region = "ap-southeast-2"
v1_scanner_endpoint = "159.13.52.241:50051"


# Scanner Configuration
source_bucket_name      = "customer-scan-bucket"
quarantine_bucket_name  = "customer-q-bucket"  # Optional
production_bucket_name  = "customer-p-bucket"  # Optional

# File Scanner Mode Configuration
# Valid values: MOVE_ALL, MOVE_MALWARE_ONLY, TAG_ONLY
v1_file_scanner_mode = "MOVE_MALWARE_ONLY"

# ========================================
# Docker/OCIR Configuration
# ========================================

docker_username = "<docker_username>"
docker_auth_token = "<docker_auth_token>"
tenancy_namespace = "<docker_namespace>"
ocir_region = "syd.ocir.io"
image_tag = "latest"

# ========================================
# Performance Configuration
# ========================================

# Maximum number of files to process per batch execution
# Higher values process more files but may increase memory usage and timeout risk
# Recommended: 50-100 for balanced performance
max_files = 100

# Number of concurrent file scans to perform
# Higher values increase throughput but use more memory
# Recommended: 3-8 depending on function memory allocation
concurrent_scans = 5

# ========================================
# Function Configuration
# ========================================

# Function container image name in OCIR
function_image_name = "v1-fss-ondemand-scanner"

# Environment name for resource tagging
environment = "prod"

# Function memory allocation in MB
# Increase for larger batch sizes or high concurrency
# 512MB: Small batches (< 50 files)
# 1024MB: Medium batches (50-100 files) - Recommended
# 2048MB: Large batches (100+ files)
function_memory_mb = 1024

# Function timeout in seconds
# Should accommodate your largest expected batch
# 300s (5 min): Small batches
# 900s (15 min): Medium batches - Recommended  
# 1800s (30 min): Large batches
function_timeout_seconds = 300

# ========================================
# Scheduled Scan Features
# ========================================

# Enable scheduled batch scanning at regular intervals
# When enabled, creates an resource scheduler to trigger the function periodically
enable_scheduled_scanning = true

# Schedule
#recurrence_details  = "FREQ=MONTHLY;BYMONTHDAY=1;BYHOUR=2;BYMINUTE=0"  # 1st day of every month at 2 AM
recurrence_details  = "FREQ=HOURLY;INTERVAL=1"  # Every hour
recurrence_type = "ICAL"


# Enable logging for function execution and events
# Creates log groups and logs for monitoring function activity
enable_logging = true

# Logging level for the function
# Valid values: "DEBUG", "INFO", "WARNING", "ERROR"
log_level = "INFO"

# ========================================
# Configuration Examples by Use Case
# ========================================

# EXAMPLE 1: Compliance Scanning (TAG_ONLY)
# v1_file_scanner_mode = "TAG_ONLY"
# max_files = 200
# concurrent_scans = 3
# function_memory_mb = 512
# function_timeout_seconds = 600
# No additional buckets required

# EXAMPLE 2: Malware Protection (MOVE_MALWARE_ONLY)  
# v1_file_scanner_mode = "MOVE_MALWARE_ONLY"
# quarantine_bucket_name = "my-quarantine-bucket"
# max_files = 100
# concurrent_scans = 5
# function_memory_mb = 1024
# function_timeout_seconds = 900

# EXAMPLE 3: Complete File Processing (MOVE_ALL)
# v1_file_scanner_mode = "MOVE_ALL"
# production_bucket_name = "my-production-bucket"
# quarantine_bucket_name = "my-quarantine-bucket"
# max_files = 50
# concurrent_scans = 8
# function_memory_mb = 2048
# function_timeout_seconds = 1200
